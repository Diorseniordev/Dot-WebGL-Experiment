<html>
  <head> </head>
  <body>
    <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/87/three.min.js"></script>
    <script type="text/javascript" src="js/THREEx.WindowResize.js"></script>
    <script>
      var point = new THREE.Vector3(10, 10, 10);
      var view = new THREE.Vector3(30, 60, 70);
      var constant = view.x * point.x + view.y * point.y + view.z * point.z;

      function getRandomPoint(point, type) {
        var newPoint = new THREE.Vector3();
        while (1) {
          newPoint.x = point.x + Math.random() * 50 - 25;
          newPoint.y = point.y + Math.random() * 50 - 25;
          newPoint.z =
            (constant - view.x * newPoint.x - view.y * newPoint.y) / view.z;
          console.log(1);
          if (newPoint.distanceTo(point) < 25) break;
        }
        while (!validatePoint(newPoint, type));
        return newPoint;
      }
      function validatePoint(point, type) {
        var valid;
        switch (type) {
          case "cube":
            valid =
              point.x < 14.25 &&
              point.x > -14.25 &&
              point.y < 14.25 &&
              point.y > -14.25 &&
              point.z < 14.25 &&
              point.z > -14.25;
            break;
          case "sphere":
            valid = point.distanceTo(new THREE.Vector3(0, 0, 0)) < 18.25;
            break;
          case "pyramid":
            let validR = ((20 - objects[0].position.y) * 25) / 40 - 1;
            valid =
              valid &&
              point.x + point.z < validR &&
              point.x + point.z > -validR &&
              point.x - point.z < validR &&
              point.x - point.z > -validR;
            break;
          case "rectangle prism standing":
            valid =
              point.x < 12.25 &&
              point.x > -12.25 &&
              point.y < 18.25 &&
              point.y > -18.25 &&
              point.z < 12.25 &&
              point.z > -12.25;
            break;
          case "rectangle prism":
            valid =
              point.x < 18.25 &&
              point.x > -18.25 &&
              point.y < 12.25 &&
              point.y > -12.25 &&
              point.z < 12.25 &&
              point.z > -12.25;
            break;
          case "cylinder standing":
            valid = point.y < 18.25 && point.y > -18.25;
            let d0 = Math.sqrt(point.x * point.x + point.z * point.z);
            valid = valid && d0 < 14.25;
            break;
          case "cylinder":
            valid = point.x < 18.25 && point.x > -18.25;
            d0 = Math.sqrt(point.y * point.y + point.z * point.z);
            valid = valid && d0 < 14.25;
            break;
          default:
            break;
        }
        return valid;
      }
      console.log(getRandomPoint(point));
    </script>
  </body>
</html>
